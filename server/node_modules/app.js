const Express = require("express");
const app = Express();
const port = 3000;
const Http = require("http").createServer();
const Socketio = require("socket.io")(Http, {
    cors: {
      origin: 'http://localhost:4200',
    }
  });

var connectionKey;
var keyWord;
var wordCard;
var stageCard;
var answers;


Http.listen(3000, () => {
    console.log("Listening at :3000...");
});

Socketio.on("connection", socket => {
  console.log("A user just connected");
  socket.on('connection key',function (data) {
             console.log(JSON.stringify(data.content));
             connectionKey = data.content;
         });
});

Socketio.on("connection", socket => {
  socket.emit('connection key', connectionKey);
});

Socketio.on("connection", socket => {
  console.log("A user just connected");
  socket.on('key word',function (data) {
             console.log(JSON.stringify(data.content));
             keyWord = data.content;
         });
});

Socketio.on("connection", socket => {
  socket.emit('key word', keyWord);
});

Socketio.on("connection", socket => {
  console.log("A user just connected");
  socket.on('word card',function (data) {
             wordCard = data;
         });
});

Socketio.on("connection", socket => {
  socket.emit('word card', wordCard);
});

Socketio.on("connection", socket => {
  console.log("A user just connected");
  socket.on('stage card',function (data) {
             stageCard = data;
         });
});

Socketio.on("connection", socket => {
  socket.emit('stage card', stageCard);
});

Socketio.on("connection", socket => {
  console.log("A user just connected");
  socket.on('choices',function (data) {
             answers = data;
         });
});

Socketio.on("connection", socket => {
  socket.emit('choices', answers);
});
